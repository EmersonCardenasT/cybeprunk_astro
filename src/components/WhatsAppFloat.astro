---
interface Props {
  phone?: string;
  message?: string;
}
const { phone = '', message = 'Hola! Quiero más información.' } = Astro.props as Props;
const href = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
import whatsappIcon from '../assets/img/whatsapp.png';

---

<div class="wa-fab">
  <a 
    href={href} 
    class="wa-button" 
    target="_blank" 
    rel="noopener noreferrer"
    aria-label="Abrir WhatsApp"
  >
    <img src={whatsappIcon.src} alt="WhatsApp" width="32" height="32">
  </a>
</div>

<style>
  :root {
    --black:    #0a0a0a;
    --white:    #f4f3ef;
    --steel:    #4a6278;
    --steel-lt: #7a98ae;
    --olive:    #6b7c55;
    --olive-lt: #8fa070;
  }

  .wa-fab {
    position: fixed;
    right: 20px;
    bottom: 20px;
    z-index: 60;
    animation: waFloat 6s ease-in-out infinite;
  }
  @media (min-width: 900px) {
    .wa-fab { right: 26px; bottom: 26px; }
  }

  .wa-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    color: var(--white);
    text-decoration: none;
    border: 1px solid rgba(10,10,10,0.1);
    background: linear-gradient(180deg, color-mix(in srgb, #25D366 86%, var(--olive) 14%), color-mix(in srgb, #128C7E 70%, var(--steel) 30%));
    box-shadow:
      0 10px 24px rgba(18, 140, 126, 0.32),
      inset 0 1px 0 rgba(255,255,255,0.18);
    transition: transform .2s ease, box-shadow .25s ease, filter .25s ease, opacity .25s ease;
    will-change: transform, filter;
    -webkit-tap-highlight-color: transparent;
  }
  .wa-button:hover {
    transform: translateY(-2px);
    box-shadow:
      0 10px 28px rgba(18, 140, 126, 0.45),
      inset 0 1px 0 rgba(255,255,255,0.25);
    filter: saturate(1.05);
  }
  .wa-button:active { transform: translateY(0); }

  .wa-icon { display: block; }

  :root.dark .wa-button {
    border-color: rgba(244,243,239,0.1);
    box-shadow:
      0 8px 24px rgba(37, 211, 102, 0.22),
      inset 0 1px 0 rgba(255,255,255,0.06);
  }

  @media (max-width: 520px) {
    .wa-button { width: 52px; height: 52px; }
  }

  @media (prefers-reduced-motion: reduce) {
    .wa-button { transition: none; }
    .wa-fab { animation: none; }
  }

  @keyframes waFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-4px); }
  }
</style>

<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600&family=DM+Serif+Display&display=swap" rel="stylesheet"/>
