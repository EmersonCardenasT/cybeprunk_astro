---
// Hero.astro — Fullscreen Background Carousel · Minimal · Steel / Olive
---

<section id="inicio" class="hero-section">

  <!-- ══════════════ BACKGROUND CAROUSEL ══════════════ -->
  <div class="bg-carousel" id="bgCarousel" aria-hidden="true">

    <!-- Slide 1: iPhone 15 Pro -->
    <div class="bg-slide active" style="background-image:url('https://images.unsplash.com/photo-1695048133142-1a20484d2569?w=1600&q=80&auto=format&fit=crop');"></div>

    <!-- Slide 2: Samsung Galaxy -->
    <div class="bg-slide" style="background-image:url('https://images.unsplash.com/photo-1610945415295-d9bbf067e59c?w=1600&q=80&auto=format&fit=crop');"></div>

    <!-- Slide 3: Tech repair workshop -->
    <div class="bg-slide" style="background-image:url('https://images.unsplash.com/photo-1581092160607-ee22621dd758?w=1600&q=80&auto=format&fit=crop');"></div>

    <!-- Slide 4: Smartphone lineup -->
    <div class="bg-slide" style="background-image:url('https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=1600&q=80&auto=format&fit=crop');"></div>

    <!-- Slide 5: Tech desk -->
    <div class="bg-slide" style="background-image:url('https://images.unsplash.com/photo-1518770660439-4636190af475?w=1600&q=80&auto=format&fit=crop');"></div>

    <!-- Overlays -->
    <div class="bg-overlay"></div>
    <div class="bg-grain"></div>
  </div>

  <!-- ══════════════ TOP META BAR ══════════════ -->
  <div class="meta-bar">
    <div class="meta-left">
      <span class="meta-num" id="metaNum">01</span>
      <span class="meta-sep"></span>
      <span class="meta-title" id="metaTitle">iPhone 15 Pro</span>
    </div>
    <div class="meta-dots" id="metaDots">
      <button class="mdot active" data-i="0" aria-label="Slide 1"></button>
      <button class="mdot" data-i="1" aria-label="Slide 2"></button>
      <button class="mdot" data-i="2" aria-label="Slide 3"></button>
      <button class="mdot" data-i="3" aria-label="Slide 4"></button>
      <button class="mdot" data-i="4" aria-label="Slide 5"></button>
    </div>
  </div>

  <!-- ══════════════ PROGRESS LINE ══════════════ -->
  <div class="progress-track" aria-hidden="true">
    <div class="progress-fill" id="progressFill"></div>
  </div>

  <!-- ══════════════ HERO CONTENT ══════════════ -->
  <div class="hero-content">

    <p class="eyebrow">
      <span class="eyebrow-pip"></span>
      Venta &amp; Reparación de Celulares
    </p>

    <h1 class="headline">
      <span class="hl-1">Tu celular,</span>
      <span class="hl-2">nuestro</span>
      <span class="hl-3">expertise.</span>
    </h1>

    <p class="body-copy">
      Reparamos pantallas, baterías y más.<br/>
      Vendemos los mejores dispositivos del mercado.
    </p>

    <div class="cta-group">
      <a href="#productos" class="cta-primary">Ver Productos</a>
      <a href="#contacto" class="cta-ghost">Contáctanos</a>
    </div>

    <div class="stats">
      <div class="stat">
        <span class="stat-val">+5K</span>
        <span class="stat-lbl">Equipos reparados</span>
      </div>
      <div class="stat-div"></div>
      <div class="stat">
        <span class="stat-val">24h</span>
        <span class="stat-lbl">Tiempo de entrega</span>
      </div>
      <div class="stat-div"></div>
      <div class="stat">
        <span class="stat-val">100%</span>
        <span class="stat-lbl">Garantía</span>
      </div>
    </div>
  </div>

  <!-- ══════════════ SIDE ARROW CONTROLS ══════════════ -->
  <div class="arrow-controls">
    <button class="arr-btn" id="arrPrev" aria-label="Anterior">
      <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
        <path d="M11 4L6 9L11 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <button class="arr-btn" id="arrNext" aria-label="Siguiente">
      <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
        <path d="M7 4L12 9L7 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>

  <!-- ══════════════ SCROLL CUE ══════════════ -->
  <div class="scroll-cue" aria-hidden="true">
    <span class="scroll-label">Scroll</span>
    <div class="scroll-line"><div class="scroll-runner"></div></div>
  </div>

</section>

<style>
  :root {
    --black:      #0a0a0a;
    --white:      #f4f3ef;
    --steel:      #4a6278;
    --steel-lt:   #7a98ae;
    --steel-dim:  rgba(74,98,120,0.5);
    --olive:      #6b7c55;
    --olive-lt:   #8fa070;
    --ov-heavy:   rgba(6, 6, 6, 0.72);
    --ov-mid:     rgba(6, 6, 6, 0.55);
    --ov-light:   rgba(6, 6, 6, 0.18);
    --border-dim: rgba(244,243,239,0.1);
    --slide-dur:  5000;   /* ms, also used in JS */
  }

  /* ── SECTION ── */
  .hero-section {
    position: relative;
    width: 100%;
    min-height: 100svh;
    display: flex;
    align-items: flex-end;
    overflow: hidden;
    color: var(--white);
    font-family: 'DM Sans', 'Helvetica Neue', sans-serif;
  }

  /* ── BG CAROUSEL ── */
  .bg-carousel { position: absolute; inset: 0; z-index: 0; }

  .bg-slide {
    position: absolute;
    inset: 0;
    background-size: cover;
    background-position: center;
    opacity: 0;
    transition: opacity 1s ease;
    will-change: opacity, transform;
  }
  .bg-slide.active {
    opacity: 1;
    animation: kenBurns 6s ease-out forwards;
  }
  @keyframes kenBurns {
    from { transform: scale(1.06); }
    to   { transform: scale(1.00); }
  }

  /* Left-heavy dark gradient so text is always readable */
  .bg-overlay {
    position: absolute; inset: 0;
    background:
      linear-gradient(90deg,  var(--ov-heavy) 0%, var(--ov-mid) 50%, var(--ov-light) 100%),
      linear-gradient(180deg, rgba(6,6,6,0.3) 0%, transparent 40%, var(--ov-mid) 100%);
  }
  .bg-grain {
    position: absolute; inset: 0;
    opacity: 0.04;
    pointer-events: none;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23g)'/%3E%3C/svg%3E");
    background-size: 256px;
  }

  /* ── PROGRESS ── */
  .progress-track {
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: rgba(244,243,239,0.07);
    z-index: 20;
  }
  .progress-fill {
    height: 100%;
    width: 0;
    background: var(--steel-lt);
    box-shadow: 0 0 8px rgba(122,152,174,0.6);
  }

  /* ── META BAR ── */
  .meta-bar {
    position: absolute;
    top: 0; left: 0; right: 0;
    z-index: 15;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 28px 44px;
    pointer-events: none;
  }
  @media (max-width:600px) { .meta-bar { padding: 22px 20px; } }

  .meta-left {
    display: flex; align-items: center; gap: 14px;
  }
  .meta-num {
    font-size: 0.65rem;
    letter-spacing: 0.3em;
    color: var(--steel-lt);
    font-variant-numeric: tabular-nums;
    transition: opacity 0.3s;
    font-weight: 500;
  }
  .meta-sep {
    width: 24px; height: 1px;
    background: var(--steel-dim);
  }
  .meta-title {
    font-size: 0.65rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: rgba(244,243,239,0.4);
    transition: opacity 0.3s;
  }

  .meta-dots {
    display: flex; gap: 8px; pointer-events: all;
  }
  .mdot {
    width: 22px; height: 2px;
    background: rgba(244,243,239,0.2);
    border: none; cursor: pointer; padding: 0;
    border-radius: 1px;
    transition: all 0.35s;
  }
  .mdot.active {
    background: var(--white);
    width: 38px;
  }

  /* ── HERO CONTENT ── */
  .hero-content {
    position: relative;
    z-index: 10;
    padding: 0 44px 76px;
    max-width: 660px;
  }
  @media (max-width:600px) {
    .hero-content { padding: 0 20px 100px; }
  }

  /* Eyebrow */
  .eyebrow {
    display: flex; align-items: center; gap: 10px;
    font-size: 0.66rem;
    letter-spacing: 0.24em;
    text-transform: uppercase;
    color: var(--steel-lt);
    margin-bottom: 30px;
    animation: fadeUp 0.9s 0.2s both;
  }
  .eyebrow-pip {
    width: 7px; height: 7px;
    background: var(--olive-lt);
    border-radius: 50%;
    flex-shrink: 0;
    box-shadow: 0 0 10px var(--olive);
  }

  /* Headline */
  .headline {
    display: flex;
    flex-direction: column;
    font-family: 'DM Serif Display', Georgia, serif;
    font-size: clamp(3rem, 8.5vw, 7.5rem);
    font-weight: 400;
    line-height: 0.92;
    letter-spacing: -0.03em;
    margin-bottom: 36px;
    color: var(--white);
  }
  .headline span { display: block; }
  .hl-1 { animation: fadeUp 0.9s 0.35s both; }
  .hl-2 { animation: fadeUp 0.9s 0.50s both; }
  .hl-3 {
    animation: fadeUp 0.9s 0.65s both;
    color: transparent;
    -webkit-text-stroke: 1px rgba(244,243,239,0.55);
  }

  /* Body */
  .body-copy {
    font-size: 0.9rem;
    color: rgba(244,243,239,0.5);
    line-height: 1.8;
    margin-bottom: 44px;
    max-width: 340px;
    font-weight: 300;
    letter-spacing: 0.02em;
    animation: fadeUp 0.9s 0.8s both;
  }

  /* CTA */
  .cta-group {
    display: flex; gap: 14px; flex-wrap: wrap;
    margin-bottom: 56px;
    animation: fadeUp 0.9s 0.95s both;
  }
  .cta-primary {
    display: inline-flex; align-items: center;
    padding: 13px 34px;
    background: var(--white);
    color: var(--black);
    font-size: 0.7rem;
    font-weight: 600;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    text-decoration: none;
    transition: background 0.25s, color 0.25s, box-shadow 0.25s;
  }
  .cta-primary:hover {
    background: var(--steel-lt);
    color: var(--white);
    box-shadow: 0 4px 32px rgba(74,98,120,0.45);
  }
  .cta-ghost {
    display: inline-flex; align-items: center;
    padding: 13px 34px;
    border: 1px solid rgba(244,243,239,0.22);
    color: rgba(244,243,239,0.65);
    font-size: 0.7rem;
    font-weight: 400;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    text-decoration: none;
    transition: border-color 0.25s, color 0.25s;
  }
  .cta-ghost:hover {
    border-color: var(--olive-lt);
    color: var(--olive-lt);
  }

  /* Stats */
  .stats {
    display: flex; align-items: center; gap: 28px;
    animation: fadeUp 0.9s 1.1s both;
  }
  @media (max-width:400px) { .stats { gap: 16px; } }
  .stat { display: flex; flex-direction: column; gap: 5px; }
  .stat-val {
    font-family: 'DM Serif Display', serif;
    font-size: 1.65rem;
    font-weight: 400;
    color: var(--white);
    line-height: 1;
    letter-spacing: -0.03em;
  }
  .stat-lbl {
    font-size: 0.6rem;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color: rgba(244,243,239,0.35);
  }
  .stat-div {
    width: 1px; height: 36px;
    background: rgba(244,243,239,0.1);
    flex-shrink: 0;
  }

  /* ── ARROW CONTROLS ── */
  .arrow-controls {
    position: absolute;
    right: 36px;
    top: 50%;
    transform: translateY(-50%);
    z-index: 15;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  @media (max-width:600px) { .arrow-controls { right: 14px; } }

  .arr-btn {
    width: 44px; height: 44px;
    display: flex; align-items: center; justify-content: center;
    background: rgba(244,243,239,0.05);
    border: 1px solid rgba(244,243,239,0.1);
    color: rgba(244,243,239,0.55);
    cursor: pointer;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    transition: all 0.25s;
  }
  .arr-btn:hover {
    background: rgba(74,98,120,0.3);
    border-color: var(--steel);
    color: var(--white);
    box-shadow: 0 0 18px rgba(74,98,120,0.35);
  }

  /* ── SCROLL CUE ── */
  .scroll-cue {
    position: absolute;
    bottom: 30px; right: 44px;
    display: flex; align-items: center; gap: 12px;
    z-index: 10;
    animation: fadeUp 0.9s 1.3s both;
  }
  @media (max-width:600px) { .scroll-cue { display: none; } }
  .scroll-label {
    font-size: 0.55rem;
    letter-spacing: 0.32em;
    text-transform: uppercase;
    color: rgba(244,243,239,0.25);
    writing-mode: vertical-rl;
  }
  .scroll-line {
    width: 1px; height: 50px;
    background: rgba(244,243,239,0.07);
    overflow: hidden;
    position: relative;
  }
  .scroll-runner {
    position: absolute; inset-inline: 0;
    height: 100%;
    background: linear-gradient(to bottom, var(--steel-lt), transparent);
    animation: runDown 1.8s ease-in-out infinite;
  }
  @keyframes runDown {
    0%   { transform: translateY(-100%); }
    100% { transform: translateY(100%); }
  }

  /* ── GLOBAL ANIM ── */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
  }
</style>

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600&family=DM+Serif+Display&display=swap" rel="stylesheet"/>

<script>
(function () {
  const SLIDES_META = [
    { num: '01', title: 'iPhone 15 Pro' },
    { num: '02', title: 'Galaxy S24 Ultra' },
    { num: '03', title: 'Reparación Express' },
    { num: '04', title: 'Smartphones Premium' },
    { num: '05', title: 'Tecnología & Accesorios' },
  ];
  const INTERVAL = 5000;

  const slides    = document.querySelectorAll('.bg-slide');
  const dots      = document.querySelectorAll('.mdot');
  const numEl     = document.getElementById('metaNum');
  const titleEl   = document.getElementById('metaTitle');
  const fillEl    = document.getElementById('progressFill');
  const total     = slides.length;
  let cur         = 0;
  let autoTimer;
  let fillTimer;

  function animateFill() {
    clearTimeout(fillTimer);
    fillEl.style.transition = 'none';
    fillEl.style.width = '0%';
    requestAnimationFrame(() => requestAnimationFrame(() => {
      fillEl.style.transition = `width ${INTERVAL}ms linear`;
      fillEl.style.width = '100%';
    }));
  }

  function go(idx) {
    slides[cur].classList.remove('active');
    dots[cur].classList.remove('active');
    cur = (idx + total) % total;
    slides[cur].classList.add('active');
    dots[cur].classList.add('active');

    // Fade meta
    numEl.style.opacity = titleEl.style.opacity = '0';
    setTimeout(() => {
      numEl.textContent   = SLIDES_META[cur].num;
      titleEl.textContent = SLIDES_META[cur].title;
      numEl.style.opacity = titleEl.style.opacity = '1';
    }, 200);

    animateFill();
  }

  function startAuto() {
    clearInterval(autoTimer);
    autoTimer = setInterval(() => go(cur + 1), INTERVAL);
  }

  document.getElementById('arrNext').addEventListener('click', () => { go(cur + 1); startAuto(); });
  document.getElementById('arrPrev').addEventListener('click', () => { go(cur - 1); startAuto(); });
  dots.forEach(d => d.addEventListener('click', () => { go(+d.dataset.i); startAuto(); }));

  // Touch swipe
  let tx = 0;
  const wrap = document.getElementById('bgCarousel');
  wrap.addEventListener('touchstart', e => { tx = e.touches[0].clientX; }, { passive: true });
  wrap.addEventListener('touchend', e => {
    const dx = tx - e.changedTouches[0].clientX;
    if (Math.abs(dx) > 40) { dx > 0 ? go(cur + 1) : go(cur - 1); startAuto(); }
  }, { passive: true });

  // Boot
  animateFill();
  startAuto();
})();
</script>